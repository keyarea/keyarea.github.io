---
layout: post
title:  "GIT 源码管理(1)"
date:   2017-08-09 17:16:54
categories: GIT
tags: GIT github
---

* content
{:toc}

GIT 是一个分布式版本控制软件，最初由林纳斯·托瓦兹（Linus Torvalds）创作，于2005年以GPL发布。最初目的是为更好地管理Linux内核开发而设计。是目前世界上最先进的分布式版本控制系统.



## GIT 源码管理

### GIT 诞生

很多人都知道，Linus在1991年创建了开源的Linux，从此，Linux系统不断发展，已经成为最大的服务器系统软件了。

Linus虽然创建了Linux，但Linux的壮大是靠全世界热心的志愿者参与的，这么多人在世界各地为Linux编写代码，那Linux的代码是如何管理的呢？

事实是，在2002年以前，世界各地的志愿者把源代码文件通过diff的方式发给Linus，然后由Linus本人通过手工方式合并代码！

你也许会想，为什么Linus不把Linux代码放到版本控制系统里呢？不是有CVS、SVN这些免费的版本控制系统吗？因为Linus坚定地反对CVS和SVN，这些集中式的版本控制系统不但速度慢，而且必须联网才能使用。有一些商用的版本控制系统，虽然比CVS、SVN好用，但那是付费的，和Linux的开源精神不符。

不过，到了2002年，Linux系统已经发展了十年了，代码库之大让Linus很难继续通过手工方式管理了，社区的弟兄们也对这种方式表达了强烈不满，于是Linus选择了一个商业的版本控制系统BitKeeper，BitKeeper的东家BitMover公司出于人道主义精神，授权Linux社区免费使用这个版本控制系统。

安定团结的大好局面在2005年就被打破了，原因是Linux社区牛人聚集，不免沾染了一些梁山好汉的江湖习气。开发Samba的Andrew试图破解BitKeeper的协议（这么干的其实也不只他一个），被BitMover公司发现了（监控工作做得不错！），于是BitMover公司怒了，要收回Linux社区的免费使用权。

Linus可以向BitMover公司道个歉，保证以后严格管教弟兄们，嗯，这是不可能的。实际情况是这样的：

Linus花了两周时间自己用C写了一个分布式版本控制系统，这就是Git！一个月之内，Linux系统的源码已经由Git管理了！牛是怎么定义的呢？大家可以体会一下。

Git迅速成为最流行的分布式版本控制系统，尤其是2008年，GitHub网站上线了，它为开源项目免费提供Git存储，无数开源项目开始迁移至GitHub，包括jQuery，PHP，Ruby等等。

历史就是这么偶然，如果不是当年BitMover公司威胁Linux社区，可能现在我们就没有免费而超级好用的Git了。

### 什么是版本控制

版本控制（Revision control）是维护工程蓝图的标准作法，能追踪工程蓝图从诞生一直到定案的过程。此外，版本控制也是一种软件工程技巧，借此能在软件开发的过程中，确保由不同人所编辑的同一代码文件案都得到同步。

### 集中式和分布式

#### 集中式

集中式版本控制系统，版本库是集中存放在中央服务器的，而干活的时候，用的都是自己的电脑，所以要先从中央服务器取得最新的版本，然后开始干活，干完活了，再把自己的活推送给中央服务器。中央服务器就好比是一个图书馆，你要改一本书，必须先从图书馆借出来，然后回到家自己改，改完了，再放回图书馆。

集中式版本控制系统最大的毛病就是必须联网才能工作，如果在局域网内还好，带宽够大，速度够快，可如果在互联网上，遇到网速慢的话，可能提交一个10M的文件就需要5分钟，这还不得把人给憋死啊。

#### 分布式

那分布式版本控制系统与集中式版本控制系统有何不同呢？首先，分布式版本控制系统根本没有“中央服务器”，每个人的电脑上都是一个完整的版本库，这样，你工作的时候，就不需要联网了，因为版本库就在你自己的电脑上。既然每个人电脑上都有一个完整的版本库，那多个人如何协作呢？比方说你在自己电脑上改了文件A，你的同事也在他的电脑上改了文件A，这时，你们俩之间只需把各自的修改推送给对方，就可以互相看到对方的修改了。

和集中式版本控制系统相比，分布式版本控制系统的安全性要高很多，因为每个人电脑里都有完整的版本库，某一个人的电脑坏掉了不要紧，随便从其他人那里复制一个就可以了。而集中式版本控制系统的中央服务器要是出了问题，所有人都没法干活了。

在实际使用分布式版本控制系统的时候，其实很少在两人之间的电脑上推送版本库的修改，因为可能你们俩不在一个局域网内，两台电脑互相访问不了，也可能今天你的同事病了，他的电脑压根没有开机。因此，分布式版本控制系统通常也有一台充当“中央服务器”的电脑，但这个服务器的作用仅仅是用来方便“交换”大家的修改，没有它大家也一样干活，只是交换修改不方便而已。

### 安装GIT

ubuntu安装GIT

```
sudo apt-get install git
```

### 创建版本库

什么是版本库呢？版本库又名仓库，英文名repository，你可以简单理解成一个目录，这个目录里面的所有文件都可以被Git管理起来，每个文件的修改、删除，Git都能跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻可以“还原”。
第一步, 先要创建一个目录, 这个目录就是用来存放仓库的.

```
$ mkdir html
$ cd html
```

第二步, 使用git init命令, 将当前目录创建成git仓库.

```
$ git init
Initialized empty Git repository in /home/user/html/.git/
```

马上就把仓库创建成功了, 并提示这是一个空仓库.

```
$ ls -al
.git
```

我们看一下当前目录有什么东西? 会发现有一个隐藏的.git目录. 这个目录就是存放着git管理工具用到的所有信息和基本配置信息. 没事千万不要手动修改这个目录, 不然改乱了, git仓库就给破坏了.

### 提交

提交就是要把需要git管理的文件保存到仓库里, 这种保存类似前面所讲的一个版本的保存.
只有把修改的的状态提供到仓库里, 才方便把仓库中把它取出来.

#### 增加文件

提交前需要先把需要关注它修改有文件或是需要提交到仓库的文件加到管理列表里来.

当前目录里没有文件, 那么我们先创建一个文件README.

```
$ touch README
```

编辑这个文件, 写一点东西在里面.

```
$ vim README
```

先用查看当前状态的命令, 查看一下现在目录下文件的状态.

```
$ git status
```

把文件加到仓库中去, 只有加到仓库中了, 才可能看一下文件的变化.

```
$ git add README
```

现在使用查看状态的命令, 看一下是目录下文件的状态.

```
$ git status
```

#### 提交

```
$ git commit
```

如果你已经配置完下面的用户信息，那么他会弹出一个vim窗口，让你填写这次提交的描述.

当然有更快捷的方式不需要弹出窗口．如下：

```
$ git commit -m '描述信息'
```

#### 配置用户信息

配置用户名, 这个用户名是你的提交patch的名字, 最好写真的名字, 不是网名, 如果有一天你成为名人了,那这个东西会一直印着你的足迹.

```
$ git config --global user.name
```

配置用户邮箱, 这个邮箱最好写你最常用的邮箱, 说不定会有人给你写邮件的, 这个是可能来自世界的任何角落, 可能是任何肤色和眼睛.

```
$ git config --global user.email
```

配置编辑提交信息的编辑器, 我们熟悉的编辑器是vim. 使用这个去编辑提交信息, 最好把每一次提交信息填写写的全面, 不是为了给别人看, 万一那天自己想回顾一下. 也需要详细的信息.

```
$ git config --global core.editor vim
```

### 查看提交信息

我们刚才学习了提交信息, 那现在查看一下我们提交的信息.

```
$ git log
```

```
linux@os:~/wangkai/git/demo$ git log
commit d06a1a0dce655cea5b6eaa312dc0326f3a754eb4
Author: Key <xkw@live.com>
Date:   Thu Aug 10 13:56:00 2017 +0800

    Init commit

    third commit

commit 01b66e6e7780217b2d3ebfe6f4388a7fecca8149
Author: Key <xkw@live.com>
Date:   Thu Aug 10 11:49:51 2017 +0800

    Init.commit

    second commit

commit c1401f3d0f635b2f23b4edbc7e70473042d2c5cc
Author: Key <xkw@live.com>
Date:   Thu Aug 10 11:23:32 2017 +0800

    Init commit

    first commit.

```
